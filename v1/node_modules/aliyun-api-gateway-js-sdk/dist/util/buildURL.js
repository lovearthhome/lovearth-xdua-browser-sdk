"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const lodash_1 = __importDefault(require("lodash"));
function isArray(val) {
    return toString.call(val) === '[object Array]';
}
function isDate(val) {
    return toString.call(val) === '[object Date]';
}
function buildParams(params) {
    if (lodash_1.default.isNil(params)) {
        return '';
    }
    let serializedParams;
    const parts = [];
    lodash_1.default.forEach(params, function serialize(val, key) {
        if (val === null || typeof val === 'undefined') {
            return;
        }
        if (isArray(val)) {
            key = key + '[]';
        }
        else {
            val = [val];
        }
        lodash_1.default.forEach(val, function parseValue(v) {
            let newValue = v;
            if (isDate(v)) {
                newValue = v.toString();
            }
            if (newValue === '') {
                parts.push(key);
            }
            else {
                parts.push(key + '=' + newValue);
            }
        });
    });
    serializedParams = parts.join('&');
    return serializedParams;
}
exports.buildParams = buildParams;
//# sourceMappingURL=buildURL.js.map